<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ink Insights — Dashboard</title>

<!-- Favicon -->
<link rel="icon" href="assests/Ink-logo.png" type="image/png" />
<link rel="stylesheet" href="dashboard.css">
</head>
 
<body>

  <!-- ======================= HEADER ======================= -->
<header class="navbar">
  <div class="nav-inner">
    <div class="brand">
      <a href="index.html">
        <img src="assests/Ink-logo.png" alt="Ink Insights Logo" />
        <span class="txt">
          <span class="line1">Ink</span>
          <span class="line2">Insights</span>
        </span>
      </a>
    </div>

    <nav class="navlinks">
      <a href="index.html">Home</a>
      <a href="dashboard.html" aria-current="page">Dashboard</a>
      <a href="about.html">About Us</a>
      <a href="faq.html">FAQ/Help</a>
      <a href="contact.html">Contact</a>
    </nav>
    <div class="actions">
      <a class="nav-cta" href="upload.html">START ANALYSIS</a>
      <div id="hamb" class="hamb" role="button" aria-label="Open menu" aria-expanded="false" tabindex="0">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>
</header>

<aside id="drawer" class="drawer" aria-hidden="true">
  <div class="menu-title">Menu</div>
  <nav class="menu">
    <a href="index.html">Home</a>
    <a href="dashboard.html" aria-current="page">Dashboard</a>
    <a href="about.html">About Us</a>
    <a href="faq.html">FAQ/Help</a>
    <a href="contact.html">Contact</a>
  </nav>
  <div class="drawer-cta-wrap">
    <a class="drawer-cta" href="upload.html">START ANALYSIS</a>
  </div>
</aside>
<div id="scrim" class="scrim" aria-hidden="true"></div>


  <!-- ======================= MAIN ======================= -->
  <main class="wrap">
    <h1 class="title">Dashboard</h1>
    <div class="divider"></div>

    <p class="tagline">Choose a feature to see more information.</p>

    <!-- Badges -->
    <div class="row">
      <span class="badge file"><span class="label">File Name:</span> <span class="value" id="fn">none</span></span>
      <span class="badge words"><span class="label">Word Count:</span> <span class="value" id="wc">0000</span></span>
      <span class="badge read"><span class="label">Read Time:</span> <span class="value" id="rt">00 min</span></span>
      <span class="spacer"></span>
      <button id="deleteBtn" class="btn delete" type="button">DELETE</button>
<div class="export-dropdown">
  <button id="exportBtn" class="btn export" type="button">EXPORT ▾</button>
  <div id="exportMenu" class="dropdown-menu">
    <button id="exportPDF" type="button">Export as PDF (Preview)</button>
    <button id="exportCSV" type="button">Export as CSV</button>
  </div>
</div>

    </div>

    <!-- Summary (no inner box; blue border on panel) -->
    <section class="panel teal">
      <h2>Summary</h2>
      <div id="summaryBox">
        <div id="summaryText" style="max-width:92%"></div>
      </div>
      <p id="summaryEmpty" class="empty-note">No summary available. Select data to get report.</p>
    </section>

    <!-- Feature grid -->
    <section class="grid">
      <a class="feature" href="features.html#keywords" data-section="keywords" aria-label="Open Keywords & Frequencies">
        <div class="panel green">
          <h2>Keywords &amp; Frequencies</h2>
          <div class="chartbox pink">
            <canvas id="keywordsChart" aria-label="Keywords bar chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>

      <a class="feature" href="features.html#themes" data-section="themes" aria-label="Open Themes & Clusters">
        <div class="panel pink">
          <h2>Themes &amp; Clusters</h2>
          <div class="chartbox sage">
            <canvas id="themesChart" aria-label="Themes scatter chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>

      <a class="feature" href="features.html#sentiment" data-section="sentiment" aria-label="Open Sentiment Overview">
        <div class="panel pink">
          <h2>Sentiment Overview</h2>
          <div class="chartbox sage">
            <canvas id="sentimentChart" aria-label="Sentiment doughnut chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>

      <a class="feature" href="features.html#emotions" data-section="emotions" aria-label="Open Emotional Patterns">
        <div class="panel green">
          <h2>Emotional Patterns</h2>
          <div class="chartbox pink">
            <canvas id="emotionsChart" aria-label="Emotions radar chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>
    </section>

    <p class="empty-note" style="text-align:center;margin-top:18px">
      We automatically remove your report after you export or delete it. Keeping things private and tidy.
    </p>
  </main>




<footer>
  <div class="footer-container">
    <div class="footer-brand">
      <h1>Enjoy Writing!</h1>
      <p>Privacy-first data analysis, designed for writers.</p>
    </div>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Use</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
  <div class="footer-bottom">
    © 2025 Ink Insights — All rights reserved.
  </div>
</footer>

<script>
(async function(){
  // === Load stored results ===
  const resultsJSON = localStorage.getItem('ink_results');
  const metaJSON = localStorage.getItem('ink_report_meta');
  const summaryBox = document.getElementById('summaryText');
  const summaryEmpty = document.getElementById('summaryEmpty');

  if(!resultsJSON || !metaJSON){
    summaryBox.innerText = "No analysis data found. Please upload a file first.";
    summaryEmpty.style.display = "block";
    return;
  }

  const results = JSON.parse(resultsJSON);
  const meta = JSON.parse(metaJSON);

  // === Fill badges ===
  document.getElementById('fn').textContent = meta.name || "unknown.txt";
  document.getElementById('wc').textContent = meta.words?.toLocaleString() || "0";
  const readTime = Math.ceil(meta.words / 200); // avg 200 words/min
  document.getElementById('rt').textContent = `${readTime} min`;

  // === Fill summary ===
  let summary = "";
  if(results.readability && results.sentiment){
    summary = `
      <strong>Overall Sentiment:</strong> ${(results.sentiment.overall ?? "neutral").toUpperCase()}<br/>
      <strong>Readability Score:</strong> ${results.readability.score} (${results.readability.level})<br/>
      <strong>Top Keywords:</strong> ${results.keywords?.slice(0,6).join(", ") || "N/A"}
    `;
  } else {
    summary = "Analysis loaded, but missing summary fields.";
  }
  summaryBox.innerHTML = summary;
  summaryEmpty.style.display = "none";

  // === Initialize charts ===
  const ctxSent = document.getElementById('sentimentChart');
  const ctxEmo = document.getElementById('emotionsChart');
  const ctxKey = document.getElementById('keywordsChart');

  if(results.sentiment){
    new Chart(ctxSent, {
      type: 'doughnut',
      data: {
        labels: ['Positive', 'Neutral', 'Negative'],
        datasets: [{
          data: [
            results.sentiment.positive || 0,
            results.sentiment.neutral || 0,
            results.sentiment.negative || 0
          ]
        }]
      },
      options: {plugins: {legend: {position: 'bottom'}}}
    });
  }

  if(results.emotions){
    new Chart(ctxEmo, {
      type: 'radar',
      data: {
        labels: Object.keys(results.emotions),
        datasets: [{
          label: 'Emotion Levels',
          data: Object.values(results.emotions)
        }]
      }
    });
  }

  if(results.keywords){
    new Chart(ctxKey, {
      type: 'bar',
      data: {
        labels: results.keywords.slice(0,10),
        datasets: [{
          label: 'Keyword Frequency',
          data: results.keywords.map(()=>Math.floor(Math.random()*20)+5)
        }]
      },
      options: {plugins: {legend: {display:false}}}
    });
  }

})();
</script>

</body>
</html>
