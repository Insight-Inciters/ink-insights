<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ink Insights — Dashboard</title>

<!-- Favicon -->
<link rel="icon" href="assests/Ink-logo.png" type="image/png" />
<link rel="stylesheet" href="dashboard.css">
</head>

 
<body>

  <!-- ======================= HEADER ======================= -->
<header class="navbar">
  <div class="nav-inner">
    <div class="brand">
      <a href="index.html">
        <img src="assests/Ink-logo.png" alt="Ink Insights Logo" />
        <span class="txt">
          <span class="line1">Ink</span>
          <span class="line2">Insights</span>
        </span>
      </a>
    </div>

    <nav class="navlinks">
      <a href="index.html">Home</a>
      <a href="dashboard.html" aria-current="page">Dashboard</a>
      <a href="about.html">About Us</a>
      <a href="faq.html">FAQ/Help</a>
      <a href="contact.html">Contact</a>
    </nav>
    <div class="actions">
      <a class="nav-cta" href="upload.html">START ANALYSIS</a>
      <div id="hamb" class="hamb" role="button" aria-label="Open menu" aria-expanded="false" tabindex="0">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>
</header>

<aside id="drawer" class="drawer" aria-hidden="true">
  <div class="menu-title">Menu</div>
  <nav class="menu">
    <a href="index.html">Home</a>
    <a href="dashboard.html" aria-current="page">Dashboard</a>
    <a href="about.html">About Us</a>
    <a href="faq.html">FAQ/Help</a>
    <a href="contact.html">Contact</a>
  </nav>
  <div class="drawer-cta-wrap">
    <a class="drawer-cta" href="upload.html">START ANALYSIS</a>
  </div>
</aside>
<div id="scrim" class="scrim" aria-hidden="true"></div>


  <!-- ======================= MAIN ======================= -->
  <main class="wrap">
    <h1 class="title">Dashboard</h1>
    <div class="divider"></div>

    <p class="tagline">Choose a feature to see more information.</p>

    <!-- Badges -->
    <div class="row">
      <span class="badge file"><span class="label">File Name:</span> <span class="value" id="fn">none</span></span>
      <span class="badge words"><span class="label">Word Count:</span> <span class="value" id="wc">0000</span></span>
      <span class="badge read"><span class="label">Read Time:</span> <span class="value" id="rt">00 min</span></span>
      <span class="spacer"></span>
      <button id="deleteBtn" class="btn delete" type="button">DELETE</button>
<div class="export-dropdown">
  <button id="exportBtn" class="btn export" type="button">EXPORT ▾</button>
  <div id="exportMenu" class="dropdown-menu">
    <button id="exportPDF" type="button">Export as PDF (Preview)</button>
    <button id="exportCSV" type="button">Export as CSV</button>
  </div>
</div>

    </div>

    <!-- Summary (no inner box; blue border on panel) -->
    <section class="panel teal">
      <h2>Summary</h2>
      <div id="summaryBox">
        <div id="summaryText" style="max-width:92%"></div>
      </div>
      <p id="summaryEmpty" class="empty-note">No summary available. Select data to get report.</p>
    </section>

    <!-- Feature grid -->
    <section class="grid">
      <a class="feature" href="features.html#keywords" data-section="keywords" aria-label="Open Keywords & Frequencies">
        <div class="panel green">
          <h2>Keywords &amp; Frequencies</h2>
          <div class="chartbox pink">
            <canvas id="keywordsChart" aria-label="Keywords bar chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>

      <a class="feature" href="features.html#themes" data-section="themes" aria-label="Open Themes & Clusters">
        <div class="panel pink">
          <h2>Themes &amp; Clusters</h2>
          <div class="chartbox sage">
            <canvas id="themesChart" aria-label="Themes scatter chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>

      <a class="feature" href="features.html#sentiment" data-section="sentiment" aria-label="Open Sentiment Overview">
        <div class="panel pink">
          <h2>Sentiment Overview</h2>
          <div class="chartbox sage">
            <canvas id="sentimentChart" aria-label="Sentiment doughnut chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>

      <a class="feature" href="features.html#emotions" data-section="emotions" aria-label="Open Emotional Patterns">
        <div class="panel green">
          <h2>Emotional Patterns</h2>
          <div class="chartbox pink">
            <canvas id="emotionsChart" aria-label="Emotions radar chart"></canvas>
          </div>
          <p class="empty-note">No chart available. Select data to get report</p>
        </div>
      </a>
    </section>

    <p class="empty-note" style="text-align:center;margin-top:18px">
      We automatically remove your report after you export or delete it. Keeping things private and tidy.
    </p>
  </main>




<footer>
  <div class="footer-container">
    <div class="footer-brand">
      <h1>Enjoy Writing!</h1>
      <p>Privacy-first data analysis, designed for writers.</p>
    </div>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Use</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
  <div class="footer-bottom">
    © 2025 Ink Insights — All rights reserved.
  </div>
</footer>

<script>
(function(){
  // Dropdown open/close
  const exportBtn = document.getElementById('exportBtn');
  const exportDropdown = document.querySelector('.export-dropdown');
  const exportMenu = document.getElementById('exportMenu');

  exportBtn.addEventListener('click', (e)=>{
    e.stopPropagation();
    exportDropdown.classList.toggle('show');
  });

  document.addEventListener('click', ()=>exportDropdown.classList.remove('show'));

  // Export handlers
  const exportPDF = document.getElementById('exportPDF');
  const exportCSV = document.getElementById('exportCSV');

  exportPDF.addEventListener('click', ()=>{
    exportDropdown.classList.remove('show');
    openPDFPreview();
  });

  exportCSV.addEventListener('click', ()=>{
    exportDropdown.classList.remove('show');
    exportAsCSV();
  });

  // PDF preview function
  function openPDFPreview(){
    // This uses html2canvas + jsPDF (already loaded)
    const main = document.querySelector('main');
    html2canvas(main).then(canvas=>{
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jspdf.jsPDF({orientation: 'p', unit: 'pt', format: 'a4'});
      const width = pdf.internal.pageSize.getWidth();
      const height = pdf.internal.pageSize.getHeight();
      const ratio = Math.min(width / canvas.width, height / canvas.height);
      pdf.addImage(imgData, 'PNG', 20, 20, canvas.width * ratio - 40, canvas.height * ratio - 40);
      pdf.output('dataurlnewwindow'); // open preview tab
      askDeletePermission();
    });
  }

  // CSV export function
  function exportAsCSV(){
    const content = document.querySelector('#summaryText')?.innerText || "No data";
    const blob = new Blob([content], {type: 'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = 'ink-insights-export.csv';
    link.click();
    URL.revokeObjectURL(url);
    askDeletePermission();
  }

  // Ask permission to delete data
  function askDeletePermission(){
    setTimeout(()=>{
      if(confirm("Export completed.\nWould you like to delete your data now?")){
        deleteData();
      }
    }, 400);
  }

function deleteData(){
  // clear summary & show empty note
  document.getElementById('summaryText').innerText = "";
  document.getElementById('summaryEmpty').style.display = "block";

  // optional: clear badges too
  document.getElementById('fn').innerText = "none";
  document.getElementById('wc').innerText = "0000";
  document.getElementById('rt').innerText = "00 min";

  // success confirmation
  setTimeout(()=>{
    alert("✅ Your data has been deleted successfully.");
  }, 300);
}


})();
</script>



<script>
(function(){
  const drawer=document.getElementById('drawer');
  const scrim=document.getElementById('scrim');
  const hamb=document.getElementById('hamb');
  function openDrawer(){
    drawer.classList.add('open');
    scrim.classList.add('show');
    hamb.classList.add('open');
  }
  function closeDrawer(){
    drawer.classList.remove('open');
    scrim.classList.remove('show');
    hamb.classList.remove('open');
  }
  hamb.addEventListener('click',()=>drawer.classList.contains('open')?closeDrawer():openDrawer());
  scrim.addEventListener('click',closeDrawer);
  document.addEventListener('keydown',e=>{if(e.key==='Escape')closeDrawer();});
  document.querySelectorAll('#drawer a').forEach(a=>a.addEventListener('click',closeDrawer));
})();
</script>


  <!-- External scripts: Chart.js + your modular dashboard logic -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script type="module" src="js/dashboard.js"></script>

</body>
</html>
